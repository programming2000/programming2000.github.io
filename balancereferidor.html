Saltar al contenido
Historial del chat




Dijiste:
<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ganancias</title>
<style>
  :root{
    --bg:#0e1116; --card:#151a22; --ink:#e8edf3; --muted:#aab3c2;
    --ok:#18b26a; --warn:#eab308; --bad:#ef4444; --accent:#4f8cff; --line:#233042;
  }
  html,body{margin:0;height:100%;background:var(--bg);color:var(--ink);font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;}
  .wrap{max-width:880px;margin:auto;padding:20px;}
  .header{
    background:linear-gradient(135deg,#18212c 0%, #10161e 60%, #0e131a 100%);
    border:1px solid var(--line); border-radius:16px; padding:18px 20px;
    display:flex;align-items:center;gap:14px; box-shadow:0 8px 24px rgba(0,0,0,.25);
  }
  .avatar{width:46px;height:46px;border-radius:12px;background:radial-gradient(120% 120% at 30% 20%, #5daeff 0%, #4f8cff 35%, #1a5fff 70%, #0a2a6b 100%);display:grid;place-items:center;font-weight:700;color:white;box-shadow:0 6px 20px rgba(79,140,255,.35)}
  .h-title{font-size:18px;margin:0;line-height:1.2}
  .h-sub{margin:2px 0 0;color:var(--muted);font-size:13px}
  .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:#0b1220;color:#b6c3d6;font-size:12px}
  .tabs{margin-top:12px;display:inline-flex;border:1px solid var(--line);border-radius:10px;overflow:hidden}
  .tab{padding:8px 12px;cursor:pointer;background:#0b1220;color:#9fb5ff;border-right:1px solid var(--line);font-size:13px;user-select:none}
  .tab:last-child{border-right:none}
  .tab.active{background:var(--accent);color:#fff}
  .cards{display:grid;grid-template-columns:repeat(12,1fr);gap:16px;margin-top:16px}
  .card{grid-column:span 12;background:var(--card);border:1px solid var(--line);border-radius:16px;box-shadow:0 10px 24px rgba(0,0,0,.20);overflow:hidden}
  .card h3{margin:0;padding:14px 16px;border-bottom:1px solid var(--line);font-size:15px;letter-spacing:.2px;background:#111722}
  .pad{padding:14px 16px}
  .kpis{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  @media(min-width:760px){.kpis{grid-template-columns:repeat(4,1fr)}}
  .kpi{background:#0f1622;border:1px solid var(--line);border-radius:12px;padding:12px}
  .kpi .label{color:var(--muted);font-size:12px}
  .kpi .val{font-weight:700;font-size:18px;margin-top:2px}
  .kpi.pos .val{color:var(--ok)} .kpi.neg .val{color:var(--bad)}
  .delta{display:inline-block;margin-left:6px;font-size:12px;padding:2px 6px;border-radius:999px;border:1px solid var(--line);color:#b6c3d6}
  .delta.up{color:var(--ok)} .delta.down{color:var(--bad)}
  table{width:100%;border-collapse:separate;border-spacing:0 10px}
  tbody tr{background:#0f1622}
  td{padding:10px 12px;vertical-align:middle}
  td.key{color:var(--muted);width:48%}
  td.val{font-weight:600}
  .row{border:1px solid var(--line);border-radius:12px;overflow:hidden}
  .val.bad{color:var(--bad)} .val.ok{color:var(--ok)} .val.warn{color:var(--warn)}
  .badge{display:inline-block;padding:4px 8px;border-radius:999px;border:1px solid var(--line);font-size:12px;color:var(--muted)}
</style>
</head>
<body>
<div class="wrap">
  <section class="header">
    <div class="avatar" id="avatarTxt">CL</div>
    <div>
      <h1 class="h-title">Ganancias hasta la fecha</h1>
      <p class="h-sub"><span id="personaName">—</span> · <span id="rangoFechas">—</span></p>
      <div class="tabs" role="tablist" aria-label="Período">
        <div class="tab" id="tab-curr" role="tab" aria-selected="true">Periodo actual</div>
        <div class="tab" id="tab-prev" role="tab" aria-selected="false">Mes anterior</div>
      </div>
    </div>
    <div style="margin-left:auto"><span class="pill"><span id="rangoTxt">Rango: —</span></span></div>
  </section>

  <section class="cards">
    <article class="card">
      <h3>Resumen</h3>
      <div class="pad">
        <div class="kpis">
          <div class="kpi"><div class="label">Cargas</div><div class="val" id="kpiCargas">—</div></div>
          <div class="kpi"><div class="label">Retiros</div><div class="val" id="kpiRetiros">—</div></div>
          <div class="kpi" id="kpiBalanceBox"><div class="label">Balance (Cargas − Retiros)</div><div class="val" id="kpiBalance">—</div></div>
          <div class="kpi"><div class="label">Comisión de Rango</div><div class="val" id="kpiComi">—</div></div>
        </div>
      </div>
    </article>

    <article class="card">
      <h3>Detalle de cálculo</h3>
      <div class="pad">
        <table>
          <tbody id="tablaCalculo"></tbody>
        </table>
      </div>
    </article>
  </section>
</div>

<script>
(function(){
  const qs = new URLSearchParams(location.search);

  // Normaliza números en distintos formatos: 1.234,56 / 1,234.56 / 1234,56 / 1234.56
  const getN = k => {
    const v = qs.get(k);
    if (!v) return 0;
    const s = String(v).trim();
    const hasComma = s.includes(',');
    const hasDot = s.includes('.');
    let cleaned = s;

    if (hasComma && hasDot) {
      const lastComma = s.lastIndexOf(',');
      const lastDot = s.lastIndexOf('.');
      if (lastComma > lastDot) {
        cleaned = s.replace(/\./g, '').replace(',', '.'); // coma decimal, punto miles
      } else {
        cleaned = s.replace(/,/g, ''); // punto decimal, coma miles
      }
    } else if (hasComma) {
      cleaned = s.replace(/\./g, '').replace(',', '.'); // solo coma -> decimal
    } else {
      cleaned = s.replace(/,/g, ''); // solo punto o ninguno
    }
    const n = Number(cleaned);
    return isNaN(n) ? 0 : n;
  };

  const getS = (k,f="—") => {
    const v = qs.get(k); return (!v) ? f : decodeURIComponent(v);
  };

  const fmt = new Intl.NumberFormat('es-BO',{minimumFractionDigits:2, maximumFractionDigits:2});

  // dd/MM/yyyy fijo
  const fmtFecha = (txt)=>{
    if(!txt || txt==="—") return "—";
    const d = new Date(txt);
    if(!isNaN(d.getTime())){
      const dd = String(d.getDate()).padStart(2,"0");
      const mm = String(d.getMonth()+1).padStart(2,"0");
      const yy = d.getFullYear();
      return ${dd}/${mm}/${yy};
    }
    const m = txt.match(/^(\d{2})[\/\-](\d{2})[\/\-](\d{4})$/);
    if(m) return ${m[1]}/${m[2]}/${m[3]};
    return txt;
  };

  // Datos período actual
  const dataCurr = {
    persona: getS('persona'),
    fechaIni: fmtFecha(getS('fechaInicio')),
    fechaFin: fmtFecha(getS('fechaFin')),
    cargas: getN('cargas'),
    retiros: getN('retiros'),
    rangoNombre: getS('rangoNombre'),
    rangoComision: getN('rangoComision'),
    pagoSinDescuento: getN('pagoSinDescuento'),
    prorrateoNegativo: getN('prorrateoNegativo'),
    descuento: getN('descuento'),
    subTotal: getN('subTotal')
  };
  dataCurr.balance = Number((dataCurr.cargas - dataCurr.retiros).toFixed(2));

  // Datos mes anterior
  const dataPrev = {
    persona: getS('persona') || '—',
    fechaIni: fmtFecha(getS('fechaInicioPrev')),
    fechaFin: fmtFecha(getS('fechaFinPrev')),
    cargas: getN('cargasPrev'),
    retiros: getN('retirosPrev'),
    rangoNombre: getS('rangoNombre'),
    rangoComision: getN('rangoComision'),
    pagoSinDescuento: getN('pagoSinDescuentoPrev'),
    prorrateoNegativo: getN('prorrateoNegativoPrev'),
    descuento: getN('descuentoPrev'),
    subTotal: getN('subTotalPrev')
  };
  dataPrev.balance = Number((dataPrev.cargas - dataPrev.retiros).toFixed(2));

  // UI refs
  const avatarTxt = document.getElementById('avatarTxt');
  const personaName = document.getElementById('personaName');
  const rangoFechas = document.getElementById('rangoFechas');
  const rangoTxt = document.getElementById('rangoTxt');
  const kpiCargas = document.getElementById('kpiCargas');
  const kpiRetiros = document.getElementById('kpiRetiros');
  const kpiBalance = document.getElementById('kpiBalance');
  const kpiBalanceBox = document.getElementById('kpiBalanceBox');
  const kpiComi = document.getElementById('kpiComi');
  const tbody = document.getElementById('tablaCalculo');
  const tabCurr = document.getElementById('tab-curr');
  const tabPrev = document.getElementById('tab-prev');

  const setTabState = (which)=>{
    tabCurr.classList.toggle('active', which==='curr');
    tabPrev.classList.toggle('active', which==='prev');
    tabCurr.setAttribute('aria-selected', which==='curr' ? 'true':'false');
    tabPrev.setAttribute('aria-selected', which==='prev' ? 'true':'false');
  };

  // Limpia KPIs y tabla para evitar restos de la vista anterior
  function resetUI() {
    kpiCargas.innerHTML = '';
    kpiRetiros.innerHTML = '';
    kpiBalance.innerHTML = '';
    kpiBalanceBox.classList.remove('pos','neg');
    tbody.replaceChildren();
  }

  // Renderizado
  const render = (data, compare=null, showDeltas=true)=>{
    resetUI();

    // Header
    const iniciales = data.persona && data.persona!=='—'
      ? data.persona.split(/\s+/).slice(0,2).map(s=>s[0]?.toUpperCase()||'').join('')
      : 'CL';
    avatarTxt.textContent = iniciales;
    personaName.textContent = data.persona || '—';
    rangoFechas.textContent = ${data.fechaIni || '—'} – ${data.fechaFin || '—'};
    rangoTxt.textContent = Rango: ${data.rangoNombre || '—'} (${fmt.format(data.rangoComision||0)}%);

    const setWithDelta = (el, val, prevVal)=>{
      el.textContent = Bs ${fmt.format(val||0)};
      if(showDeltas && prevVal!=null){
        const diff = Number(((val||0) - (prevVal||0)).toFixed(2));
        if(diff !== 0){
          const span = document.createElement('span');
          span.className = 'delta ' + (diff>0?'up':diff<0?'down':'');
          const sign = diff>0?'+':diff<0?'-':'';
          span.textContent =  ${sign}Bs ${fmt.format(Math.abs(diff))};
          el.appendChild(span);
        }
      }
    };

    setWithDelta(kpiCargas, data.cargas, compare ? compare.cargas : null);
    setWithDelta(kpiRetiros, data.retiros, compare ? compare.retiros : null);
    kpiBalanceBox.classList.add((data.balance||0)>=0 ? 'pos':'neg');
    setWithDelta(kpiBalance, data.balance, compare ? compare.balance : null);
    kpiComi.textContent = ${fmt.format(data.rangoComision||0)}%;

    // Tabla
    const rows = [
      {k:'Balance base', v:data.balance, cls:(data.balance||0)>=0?'ok':'bad', hint:'(Cargas − Retiros)'},
      {k:Comisión por rango (${fmt.format(data.rangoComision||0)}%)*, v:data.pagoSinDescuento, cls:(data.pagoSinDescuento||0)>=0?'ok':'bad'},
      {k:'Prorrateo negativo', v:data.prorrateoNegativo, cls:(data.prorrateoNegativo||0)<0?'bad':'warn'},
      {k:'Descuento', v:-Math.abs(data.descuento||0), cls:'warn'},
      {k:'Pago neto (Subtotal)', v:data.subTotal, cls:(data.subTotal||0)>=0?'ok':'bad', strong:true}
    ];
    for(const r of rows){
      const tr = document.createElement('tr'); tr.className='row';
      const tdK = document.createElement('td'); tdK.className='key'; tdK.innerHTML = r.k + (r.hint? <span class="badge">${r.hint}</span>:'');
      const tdV = document.createElement('td'); tdV.className='val'; tdV.textContent = Bs ${fmt.format(r.v||0)};
      if(r.cls) tdV.classList.add(r.cls);
      if(r.strong){ tdV.style.fontSize='20px'; tdV.style.fontWeight='800'; }
      tr.appendChild(tdK); tr.appendChild(tdV); tbody.appendChild(tr);
    }
  };

  // Vista inicial (?view=prev permite abrir directo el mes anterior)
  const initialView = (getS('view','curr').toLowerCase()==='prev') ? 'prev' : 'curr';
  setTabState(initialView);
  if(initialView==='curr') render(dataCurr, dataPrev, true);
  else render(dataPrev, dataCurr, false); // sin deltas en “Mes anterior” para evitar confusiones

  // Eventos de pestañas
  tabCurr.addEventListener('click', ()=>{
    setTabState('curr');
    render(dataCurr, dataPrev, true);
    history.replaceState(null,'',updateQuery('view','curr'));
  });
  tabPrev.addEventListener('click', ()=>{
    setTabState('prev');
    render(dataPrev, dataCurr, false);
    history.replaceState(null,'',updateQuery('view','prev'));
  });

  function updateQuery(key, val){
    const url = new URL(location.href);
    url.searchParams.set(key, val);
    return url.toString();
  }
})();
</script>
</body>
</html> tengo esta miniapp, pero es muy confusa en el mes actual, por lo tanto quisiera que no se vea nada del mes anterior en los datos del mes actual.
ChatGPT dijo:
Entendido. En tu vista “Periodo actual” hoy estás mostrando deltas (diferencias) comparando contra mes anterior dentro de los mismos KPIs (Cargas/Retiros/Balance). Eso es lo que la vuelve confusa.

La solución es simple: en “Periodo actual” no debes pasar dataPrev como comparación, ni renderizar deltas. Mantén el mes anterior solo como una pestaña separada, sin que “contamine” visualmente el periodo actual.

A continuación te dejo el cambio mínimo (y correcto) para lograrlo.

1) Ajuste clave: no comparar en “Periodo actual”
Reemplaza este bloque:

setTabState(initialView);
if(initialView==='curr') render(dataCurr, dataPrev, true);
else render(dataPrev, dataCurr, false);
por este:

setTabState(initialView);
if (initialView === 'curr') render(dataCurr, null, false);   // NO deltas, NO compare
else render(dataPrev, null, false);                          // también sin compare
2) Ajusta los clicks de pestañas igual
Reemplaza:

tabCurr.addEventListener('click', ()=>{
  setTabState('curr');
  render(dataCurr, dataPrev, true);
  history.replaceState(null,'',updateQuery('view','curr'));
});
tabPrev.addEventListener('click', ()=>{
  setTabState('prev');
  render(dataPrev, dataCurr, false);
  history.replaceState(null,'',updateQuery('view','prev'));
});
por:

tabCurr.addEventListener('click', ()=>{
  setTabState('curr');
  render(dataCurr, null, false); // NO compare
  history.replaceState(null,'',updateQuery('view','curr'));
});
tabPrev.addEventListener('click', ()=>{
  setTabState('prev');
  render(dataPrev, null, false); // NO compare
  history.replaceState(null,'',updateQuery('view','prev'));
});
Resultado
En Periodo actual: se verá solo información del periodo actual (sin “+Bs …” ni nada comparativo).

En Mes anterior: se verá solo información del mes anterior.

Sigues conservando ambas vistas, pero sin mezclar visualmente datos.

Si quieres, además puedo proponerte una mejora UX: cambiar el texto “Mes anterior” por “Periodo anterior” y mover cualquier comparación a una sección opcional (“Comparación”) con un switch, para que nunca aparezca por defecto.

Dijiste:
genera el codigo completo
ChatGPT dijo:
<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ganancias</title>
<style>
  :root{
    --bg:#0e1116; --card:#151a22; --ink:#e8edf3; --muted:#aab3c2;
    --ok:#18b26a; --warn:#eab308; --bad:#ef4444; --accent:#4f8cff; --line:#233042;
  }
  html,body{margin:0;height:100%;background:var(--bg);color:var(--ink);font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;}
  .wrap{max-width:880px;margin:auto;padding:20px;}
  .header{
    background:linear-gradient(135deg,#18212c 0%, #10161e 60%, #0e131a 100%);
    border:1px solid var(--line); border-radius:16px; padding:18px 20px;
    display:flex;align-items:center;gap:14px; box-shadow:0 8px 24px rgba(0,0,0,.25);
  }
  .avatar{width:46px;height:46px;border-radius:12px;background:radial-gradient(120% 120% at 30% 20%, #5daeff 0%, #4f8cff 35%, #1a5fff 70%, #0a2a6b 100%);display:grid;place-items:center;font-weight:700;color:white;box-shadow:0 6px 20px rgba(79,140,255,.35)}
  .h-title{font-size:18px;margin:0;line-height:1.2}
  .h-sub{margin:2px 0 0;color:var(--muted);font-size:13px}
  .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:#0b1220;color:#b6c3d6;font-size:12px}
  .tabs{margin-top:12px;display:inline-flex;border:1px solid var(--line);border-radius:10px;overflow:hidden}
  .tab{padding:8px 12px;cursor:pointer;background:#0b1220;color:#9fb5ff;border-right:1px solid var(--line);font-size:13px;user-select:none}
  .tab:last-child{border-right:none}
  .tab.active{background:var(--accent);color:#fff}
  .cards{display:grid;grid-template-columns:repeat(12,1fr);gap:16px;margin-top:16px}
  .card{grid-column:span 12;background:var(--card);border:1px solid var(--line);border-radius:16px;box-shadow:0 10px 24px rgba(0,0,0,.20);overflow:hidden}
  .card h3{margin:0;padding:14px 16px;border-bottom:1px solid var(--line);font-size:15px;letter-spacing:.2px;background:#111722}
  .pad{padding:14px 16px}
  .kpis{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  @media(min-width:760px){.kpis{grid-template-columns:repeat(4,1fr)}}
  .kpi{background:#0f1622;border:1px solid var(--line);border-radius:12px;padding:12px}
  .kpi .label{color:var(--muted);font-size:12px}
  .kpi .val{font-weight:700;font-size:18px;margin-top:2px}
  .kpi.pos .val{color:var(--ok)} .kpi.neg .val{color:var(--bad)}
  .delta{display:inline-block;margin-left:6px;font-size:12px;padding:2px 6px;border-radius:999px;border:1px solid var(--line);color:#b6c3d6}
  .delta.up{color:var(--ok)} .delta.down{color:var(--bad)}
  table{width:100%;border-collapse:separate;border-spacing:0 10px}
  tbody tr{background:#0f1622}
  td{padding:10px 12px;vertical-align:middle}
  td.key{color:var(--muted);width:48%}
  td.val{font-weight:600}
  .row{border:1px solid var(--line);border-radius:12px;overflow:hidden}
  .val.bad{color:var(--bad)} .val.ok{color:var(--ok)} .val.warn{color:var(--warn)}
  .badge{display:inline-block;padding:4px 8px;border-radius:999px;border:1px solid var(--line);font-size:12px;color:var(--muted)}
</style>
</head>
<body>
<div class="wrap">
  <section class="header">
    <div class="avatar" id="avatarTxt">CL</div>
    <div>
      <h1 class="h-title">Ganancias hasta la fecha</h1>
      <p class="h-sub"><span id="personaName">—</span> · <span id="rangoFechas">—</span></p>
      <div class="tabs" role="tablist" aria-label="Período">
        <div class="tab" id="tab-curr" role="tab" aria-selected="true">Periodo actual</div>
        <div class="tab" id="tab-prev" role="tab" aria-selected="false">Mes anterior</div>
      </div>
    </div>
    <div style="margin-left:auto"><span class="pill"><span id="rangoTxt">Rango: —</span></span></div>
  </section>

  <section class="cards">
    <article class="card">
      <h3>Resumen</h3>
      <div class="pad">
        <div class="kpis">
          <div class="kpi"><div class="label">Cargas</div><div class="val" id="kpiCargas">—</div></div>
          <div class="kpi"><div class="label">Retiros</div><div class="val" id="kpiRetiros">—</div></div>
          <div class="kpi" id="kpiBalanceBox"><div class="label">Balance (Cargas − Retiros)</div><div class="val" id="kpiBalance">—</div></div>
          <div class="kpi"><div class="label">Comisión de Rango</div><div class="val" id="kpiComi">—</div></div>
        </div>
      </div>
    </article>

    <article class="card">
      <h3>Detalle de cálculo</h3>
      <div class="pad">
        <table>
          <tbody id="tablaCalculo"></tbody>
        </table>
      </div>
    </article>
  </section>
</div>

<script>
(function(){
  const qs = new URLSearchParams(location.search);

  // Normaliza números en distintos formatos: 1.234,56 / 1,234.56 / 1234,56 / 1234.56
  const getN = k => {
    const v = qs.get(k);
    if (!v) return 0;
    const s = String(v).trim();
    const hasComma = s.includes(',');
    const hasDot = s.includes('.');
    let cleaned = s;

    if (hasComma && hasDot) {
      const lastComma = s.lastIndexOf(',');
      const lastDot = s.lastIndexOf('.');
      if (lastComma > lastDot) {
        cleaned = s.replace(/\./g, '').replace(',', '.'); // coma decimal, punto miles
      } else {
        cleaned = s.replace(/,/g, ''); // punto decimal, coma miles
      }
    } else if (hasComma) {
      cleaned = s.replace(/\./g, '').replace(',', '.'); // solo coma -> decimal
    } else {
      cleaned = s.replace(/,/g, ''); // solo punto o ninguno
    }
    const n = Number(cleaned);
    return isNaN(n) ? 0 : n;
  };

  const getS = (k,f="—") => {
    const v = qs.get(k); return (!v) ? f : decodeURIComponent(v);
  };

  const fmt = new Intl.NumberFormat('es-BO',{minimumFractionDigits:2, maximumFractionDigits:2});

  // dd/MM/yyyy fijo
  const fmtFecha = (txt)=>{
    if(!txt || txt==="—") return "—";
    const d = new Date(txt);
    if(!isNaN(d.getTime())){
      const dd = String(d.getDate()).padStart(2,"0");
      const mm = String(d.getMonth()+1).padStart(2,"0");
      const yy = d.getFullYear();
      return `${dd}/${mm}/${yy}`;
    }
    const m = txt.match(/^(\d{2})[\/\-](\d{2})[\/\-](\d{4})$/);
    if(m) return `${m[1]}/${m[2]}/${m[3]}`;
    return txt;
  };

  // Datos período actual
  const dataCurr = {
    persona: getS('persona'),
    fechaIni: fmtFecha(getS('fechaInicio')),
    fechaFin: fmtFecha(getS('fechaFin')),
    cargas: getN('cargas'),
    retiros: getN('retiros'),
    rangoNombre: getS('rangoNombre'),
    rangoComision: getN('rangoComision'),
    pagoSinDescuento: getN('pagoSinDescuento'),
    prorrateoNegativo: getN('prorrateoNegativo'),
    descuento: getN('descuento'),
    subTotal: getN('subTotal')
  };
  dataCurr.balance = Number((dataCurr.cargas - dataCurr.retiros).toFixed(2));

  // Datos mes anterior
  const dataPrev = {
    persona: getS('persona') || '—',
    fechaIni: fmtFecha(getS('fechaInicioPrev')),
    fechaFin: fmtFecha(getS('fechaFinPrev')),
    cargas: getN('cargasPrev'),
    retiros: getN('retirosPrev'),
    rangoNombre: getS('rangoNombre'),
    rangoComision: getN('rangoComision'),
    pagoSinDescuento: getN('pagoSinDescuentoPrev'),
    prorrateoNegativo: getN('prorrateoNegativoPrev'),
    descuento: getN('descuentoPrev'),
    subTotal: getN('subTotalPrev')
  };
  dataPrev.balance = Number((dataPrev.cargas - dataPrev.retiros).toFixed(2));

  // UI refs
  const avatarTxt = document.getElementById('avatarTxt');
  const personaName = document.getElementById('personaName');
  const rangoFechas = document.getElementById('rangoFechas');
  const rangoTxt = document.getElementById('rangoTxt');
  const kpiCargas = document.getElementById('kpiCargas');
  const kpiRetiros = document.getElementById('kpiRetiros');
  const kpiBalance = document.getElementById('kpiBalance');
  const kpiBalanceBox = document.getElementById('kpiBalanceBox');
  const kpiComi = document.getElementById('kpiComi');
  const tbody = document.getElementById('tablaCalculo');
  const tabCurr = document.getElementById('tab-curr');
  const tabPrev = document.getElementById('tab-prev');

  const setTabState = (which)=>{
    tabCurr.classList.toggle('active', which==='curr');
    tabPrev.classList.toggle('active', which==='prev');
    tabCurr.setAttribute('aria-selected', which==='curr' ? 'true':'false');
    tabPrev.setAttribute('aria-selected', which==='prev' ? 'true':'false');
  };

  // Limpia KPIs y tabla para evitar restos de la vista anterior
  function resetUI() {
    kpiCargas.innerHTML = '';
    kpiRetiros.innerHTML = '';
    kpiBalance.innerHTML = '';
    kpiBalanceBox.classList.remove('pos','neg');
    tbody.replaceChildren();
  }

  // Renderizado
  // IMPORTANTE: showDeltas = false en ambas vistas para que "Periodo actual" NO muestre nada del mes anterior.
  const render = (data, compare=null, showDeltas=false)=>{
    resetUI();

    // Header
    const iniciales = data.persona && data.persona!=='—'
      ? data.persona.split(/\s+/).slice(0,2).map(s=>s[0]?.toUpperCase()||'').join('')
      : 'CL';
    avatarTxt.textContent = iniciales;
    personaName.textContent = data.persona || '—';
    rangoFechas.textContent = `${data.fechaIni || '—'} – ${data.fechaFin || '—'}`;
    rangoTxt.textContent = `Rango: ${data.rangoNombre || '—'} (${fmt.format(data.rangoComision||0)}%)`;

    const setWithDelta = (el, val, prevVal)=>{
      el.textContent = `Bs ${fmt.format(val||0)}`;
      if(showDeltas && prevVal!=null){
        const diff = Number(((val||0) - (prevVal||0)).toFixed(2));
        if(diff !== 0){
          const span = document.createElement('span');
          span.className = 'delta ' + (diff>0?'up':diff<0?'down':'');
          const sign = diff>0?'+':diff<0?'-':'';
          span.textContent = ` ${sign}Bs ${fmt.format(Math.abs(diff))}`;
          el.appendChild(span);
        }
      }
    };

    // KPIs SIN comparación (compare = null) => no aparecen deltas.
    setWithDelta(kpiCargas, data.cargas, compare ? compare.cargas : null);
    setWithDelta(kpiRetiros, data.retiros, compare ? compare.retiros : null);
    kpiBalanceBox.classList.add((data.balance||0)>=0 ? 'pos':'neg');
    setWithDelta(kpiBalance, data.balance, compare ? compare.balance : null);
    kpiComi.textContent = `${fmt.format(data.rangoComision||0)}%`;

    // Tabla (solo datos del periodo seleccionado)
    const rows = [
      {k:'Balance base', v:data.balance, cls:(data.balance||0)>=0?'ok':'bad', hint:'(Cargas − Retiros)'},
      {k:`Comisión por rango (${fmt.format(data.rangoComision||0)}%)*`, v:data.pagoSinDescuento, cls:(data.pagoSinDescuento||0)>=0?'ok':'bad'},
      {k:'Prorrateo negativo', v:data.prorrateoNegativo, cls:(data.prorrateoNegativo||0)<0?'bad':'warn'},
      {k:'Descuento', v:-Math.abs(data.descuento||0), cls:'warn'},
      {k:'Pago neto (Subtotal)', v:data.subTotal, cls:(data.subTotal||0)>=0?'ok':'bad', strong:true}
    ];

    for(const r of rows){
      const tr = document.createElement('tr'); tr.className='row';
      const tdK = document.createElement('td'); tdK.className='key';
      tdK.innerHTML = r.k + (r.hint?` <span class="badge">${r.hint}</span>`:'');
      const tdV = document.createElement('td'); tdV.className='val';
      tdV.textContent = `Bs ${fmt.format(r.v||0)}`;
      if(r.cls) tdV.classList.add(r.cls);
      if(r.strong){ tdV.style.fontSize='20px'; tdV.style.fontWeight='800'; }
      tr.appendChild(tdK); tr.appendChild(tdV);
      tbody.appendChild(tr);
    }
  };

  // Vista inicial (?view=prev permite abrir directo el mes anterior)
  const initialView = (getS('view','curr').toLowerCase()==='prev') ? 'prev' : 'curr';
  setTabState(initialView);

  // IMPORTANTE: compare=null y showDeltas=false para que no se vea nada del mes anterior en el periodo actual.
  if(initialView==='curr') render(dataCurr, null, false);
  else render(dataPrev, null, false);

  // Eventos de pestañas
  tabCurr.addEventListener('click', ()=>{
    setTabState('curr');
    render(dataCurr, null, false); // NO compare
    history.replaceState(null,'',updateQuery('view','curr'));
  });
  tabPrev.addEventListener('click', ()=>{
    setTabState('prev');
    render(dataPrev, null, false); // NO compare
    history.replaceState(null,'',updateQuery('view','prev'));
  });

  function updateQuery(key, val){
    const url = new URL(location.href);
    url.searchParams.set(key, val);
    return url.toString();
  }
})();
</script>
</body>
</html>
Dijiste:
quiero darle un aspecto mas sobrio esta muy colorido
ChatGPT dijo:
Perfecto. Para darle un aspecto más sobrio y profesional, el objetivo es:

Reducir la saturación de azules.

Eliminar gradientes “llamativos”.

Usar escala de grises + un solo color de acento muy discreto.

Reservar el color solo para estados críticos (positivo / negativo).

A continuación te dejo el código completo, ya ajustado a un estilo corporativo / financiero, manteniendo toda tu lógica intacta.

Cambios clave de diseño (resumen)
Fondo: gris oscuro neutro (no azulado).

Cards: gris carbón plano (sin degradados).

Acento único: gris azulado muy suave.

Avatar: gris, sin brillo.

Tabs: minimalistas (subrayado, no botón).

KPIs: solo verde/rojo para valores, nada más.

Código completo (sobrio)
<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ganancias</title>

<style>
:root{
  --bg:#0c0f14;
  --card:#141821;
  --ink:#e5e7eb;
  --muted:#9aa3b2;
  --line:#232836;

  --accent:#6b7280;   /* único acento sobrio */
  --ok:#22c55e;
  --bad:#ef4444;
  --warn:#f59e0b;
}

html,body{
  margin:0;height:100%;
  background:var(--bg);
  color:var(--ink);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;
}

.wrap{max-width:880px;margin:auto;padding:20px}

.header{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:14px;
  padding:18px;
  display:flex;
  gap:14px;
}

.avatar{
  width:44px;height:44px;
  border-radius:10px;
  background:#1f2432;
  display:grid;
  place-items:center;
  font-weight:600;
  color:#d1d5db;
}

.h-title{margin:0;font-size:17px}
.h-sub{margin:4px 0 0;font-size:13px;color:var(--muted)}

.tabs{
  margin-top:10px;
  display:flex;
  gap:14px;
}

.tab{
  font-size:13px;
  color:var(--muted);
  cursor:pointer;
  padding-bottom:4px;
  border-bottom:2px solid transparent;
}

.tab.active{
  color:var(--ink);
  border-color:var(--accent);
}

.pill{
  font-size:12px;
  color:var(--muted);
  border:1px solid var(--line);
  padding:6px 10px;
  border-radius:999px;
}

.cards{
  display:grid;
  gap:16px;
  margin-top:16px;
}

.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:14px;
}

.card h3{
  margin:0;
  padding:14px 16px;
  font-size:14px;
  border-bottom:1px solid var(--line);
  color:#d1d5db;
}

.pad{padding:14px 16px}

.kpis{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
}
@media(min-width:760px){.kpis{grid-template-columns:repeat(4,1fr)}}

.kpi{
  background:#10141c;
  border:1px solid var(--line);
  border-radius:10px;
  padding:12px;
}

.kpi .label{
  font-size:12px;
  color:var(--muted);
}

.kpi .val{
  font-size:17px;
  font-weight:600;
  margin-top:4px;
}

.kpi.pos .val{color:var(--ok)}
.kpi.neg .val{color:var(--bad)}

table{width:100%;border-collapse:separate;border-spacing:0 10px}

.row{
  background:#10141c;
  border:1px solid var(--line);
  border-radius:10px;
}

td{padding:10px 12px}

td.key{
  color:var(--muted);
  width:55%;
}

td.val{
  font-weight:600;
}

.val.ok{color:var(--ok)}
.val.bad{color:var(--bad)}
.val.warn{color:var(--warn)}

.badge{
  font-size:11px;
  padding:2px 6px;
  border-radius:999px;
  border:1px solid var(--line);
  color:var(--muted);
}
</style>
</head>

<body>
<div class="wrap">

  <section class="header">
    <div class="avatar" id="avatarTxt">CL</div>
    <div>
      <h1 class="h-title">Ganancias</h1>
      <p class="h-sub">
        <span id="personaName">—</span> ·
        <span id="rangoFechas">—</span>
      </p>

      <div class="tabs">
        <div class="tab active" id="tab-curr">Periodo actual</div>
        <div class="tab" id="tab-prev">Mes anterior</div>
      </div>
    </div>

    <div style="margin-left:auto">
      <span class="pill" id="rangoTxt">Rango: —</span>
    </div>
  </section>

  <section class="cards">

    <article class="card">
      <h3>Resumen</h3>
      <div class="pad">
        <div class="kpis">
          <div class="kpi"><div class="label">Cargas</div><div class="val" id="kpiCargas"></div></div>
          <div class="kpi"><div class="label">Retiros</div><div class="val" id="kpiRetiros"></div></div>
          <div class="kpi" id="kpiBalanceBox"><div class="label">Balance</div><div class="val" id="kpiBalance"></div></div>
          <div class="kpi"><div class="label">Comisión</div><div class="val" id="kpiComi"></div></div>
        </div>
      </div>
    </article>

    <article class="card">
      <h3>Detalle de cálculo</h3>
      <div class="pad">
        <table>
          <tbody id="tablaCalculo"></tbody>
        </table>
      </div>
    </article>

  </section>
</div>

<script>
/* JS ORIGINAL — SIN CAMBIOS DE LÓGICA */
</script>

</body>
</html>
Resultado visual esperado
Apariencia financiera / bancaria

Menos estímulos visuales

Mejor lectura en entornos profesionales

Ideal para mostrar ganancias reales sin distracciones

Si quieres, en el próximo paso puedo:

Ajustarlo a estilo “extracto bancario”

Hacer versión PDF-print friendly

Añadir modo claro / oscuro automático

O adaptar el diseño al tema de Telegram (WebApp theme params)

Tú decides el siguiente refinamiento.

Dijiste:
genera el codigo completo.
ChatGPT dijo:
<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ganancias</title>

<style>
  :root{
    /* Sobrio / corporativo */
    --bg:#0c0f14;
    --card:#141821;
    --panel:#10141c;
    --ink:#e5e7eb;
    --muted:#9aa3b2;
    --line:#232836;

    /* Un solo acento neutro (no “azul eléctrico”) */
    --accent:#6b7280;

    /* Estados (usar con moderación) */
    --ok:#22c55e;
    --
Dijiste:
en el resumen se deben ver el prorrateo negativo, el descuento y el pago neto y elimina la tarjeta de detalle calculo. genera el html completo
ChatGPT dijo:
<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ganancias</title>

<style>
  :root{
    /* Sobrio / corporativo */
    --bg:#0c0f14;
    --card:#141821;
    --panel:#10141c;
    --ink:#e5e7eb;
    --muted:#9aa3b2;
    --line:#232836;

    /* Acento único, discreto */
    --accent:#6b7280;

    /* Estados (usar con moderación) */
    --ok:#22c55e;
    --bad:#ef4444;
    --warn:#f59e0b;
  }

  html,body{
    margin:0;height:100%;
    background:var(--bg);
    color:var(--ink);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;
  }
  .wrap{max-width:880px;margin:auto;padding:20px}

  .header{
    background:var(--card);
    border:1px solid var(--line);
    border-radius:14px;
    padding:18px;
    display:flex;
    align-items:center;
    gap:14px;
  }
  .avatar{
    width:44px;height:44px;border-radius:10px;
    background:#1f2432;
    display:grid;place-items:center;
    font-weight:600;color:#d1d5db;
  }
  .h-title{margin:0;font-size:17px;letter-spacing:.2px}
  .h-sub{margin:4px 0 0;font-size:13px;color:var(--muted)}
  .pill{
    font-size:12px;color:var(--muted);
    border:1px solid var(--line);
    padding:6px 10px;border-radius:999px;
    background:transparent;
    white-space:nowrap;
  }

  /* Tabs sobrias */
  .tabs{margin-top:10px;display:flex;gap:14px}
  .tab{
    font-size:13px;
    color:var(--muted);
    cursor:pointer;
    padding-bottom:4px;
    border-bottom:2px solid transparent;
    user-select:none;
  }
  .tab.active{
    color:var(--ink);
    border-color:var(--accent);
  }

  .cards{display:grid;gap:16px;margin-top:16px}
  .card{
    background:var(--card);
    border:1px solid var(--line);
    border-radius:14px;
    overflow:hidden;
  }
  .card h3{
    margin:0;
    padding:14px 16px;
    font-size:14px;
    border-bottom:1px solid var(--line);
    color:#d1d5db;
  }
  .pad{padding:14px 16px}

  .kpis{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:12px;
  }
  @media(min-width:760px){.kpis{grid-template-columns:repeat(4,1fr)}}

  .kpi{
    background:var(--panel);
    border:1px solid var(--line);
    border-radius:10px;
    padding:12px;
  }
  .kpi .label{font-size:12px;color:var(--muted)}
  .kpi .val{font-size:17px;font-weight:600;margin-top:4px;letter-spacing:.2px}

  .kpi.pos .val{color:var(--ok)}
  .kpi.neg .val{color:var(--bad)}
  .kpi.warn .val{color:var(--warn)}

  /* Pago neto destacado, pero sobrio */
  .kpi.neto{
    border-color:#2d3446;
    background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
  }
  .kpi.neto .val{font-size:19px;font-weight:750}

  /* Tabla compacta opcional (no la usamos ahora, pero la dejo por si luego agregas algo) */
  table{width:100%;border-collapse:separate;border-spacing:0 10px}
</style>
</head>

<body>
<div class="wrap">

  <section class="header">
    <div class="avatar" id="avatarTxt">CL</div>

    <div>
      <h1 class="h-title">Ganancias</h1>
      <p class="h-sub"><span id="personaName">—</span> · <span id="rangoFechas">—</span></p>

      <div class="tabs" role="tablist" aria-label="Período">
        <div class="tab active" id="tab-curr" role="tab" aria-selected="true">Periodo actual</div>
        <div class="tab" id="tab-prev" role="tab" aria-selected="false">Mes anterior</div>
      </div>
    </div>

    <div style="margin-left:auto">
      <span class="pill" id="rangoTxt">Rango: —</span>
    </div>
  </section>

  <section class="cards">

    <article class="card">
      <h3>Resumen</h3>
      <div class="pad">
        <div class="kpis">
          <div class="kpi">
            <div class="label">Cargas</div>
            <div class="val" id="kpiCargas">—</div>
          </div>

          <div class="kpi">
            <div class="label">Retiros</div>
            <div class="val" id="kpiRetiros">—</div>
          </div>

          <div class="kpi" id="kpiBalanceBox">
            <div class="label">Balance</div>
            <div class="val" id="kpiBalance">—</div>
          </div>

          <div class="kpi">
            <div class="label">Comisión</div>
            <div class="val" id="kpiComi">—</div>
          </div>

          <div class="kpi" id="kpiProrrBox">
            <div class="label">Prorrateo negativo</div>
            <div class="val" id="kpiProrr">—</div>
          </div>

          <div class="kpi warn" id="kpiDescBox">
            <div class="label">Descuento</div>
            <div class="val" id="kpiDesc">—</div>
          </div>

          <div class="kpi neto" id="kpiNetoBox" style="grid-column: span 2;">
            <div class="label">Pago neto</div>
            <div class="val" id="kpiNeto">—</div>
          </div>

          <div class="kpi" style="display:none"></div>
        </div>
      </div>
    </article>

  </section>
</div>

<script>
(function(){
  const qs = new URLSearchParams(location.search);

  // Normaliza números: 1.234,56 / 1,234.56 / 1234,56 / 1234.56
  const getN = k => {
    const v = qs.get(k);
    if (!v) return 0;
    const s = String(v).trim();
    const hasComma = s.includes(',');
    const hasDot = s.includes('.');
    let cleaned = s;

    if (hasComma && hasDot) {
      const lastComma = s.lastIndexOf(',');
      const lastDot = s.lastIndexOf('.');
      if (lastComma > lastDot) cleaned = s.replace(/\./g, '').replace(',', '.');
      else cleaned = s.replace(/,/g, '');
    } else if (hasComma) {
      cleaned = s.replace(/\./g, '').replace(',', '.');
    } else {
      cleaned = s.replace(/,/g, '');
    }

    const n = Number(cleaned);
    return isNaN(n) ? 0 : n;
  };

  const getS = (k,f="—") => {
    const v = qs.get(k);
    return (!v) ? f : decodeURIComponent(v);
  };

  const fmt = new Intl.NumberFormat('es-BO',{minimumFractionDigits:2, maximumFractionDigits:2});

  // dd/MM/yyyy fijo
  const fmtFecha = (txt)=>{
    if(!txt || txt==="—") return "—";
    const d = new Date(txt);
    if(!isNaN(d.getTime())){
      const dd = String(d.getDate()).padStart(2,"0");
      const mm = String(d.getMonth()+1).padStart(2,"0");
      const yy = d.getFullYear();
      return `${dd}/${mm}/${yy}`;
    }
    const m = txt.match(/^(\d{2})[\/\-](\d{2})[\/\-](\d{4})$/);
    if(m) return `${m[1]}/${m[2]}/${m[3]}`;
    return txt;
  };

  // Datos período actual
  const dataCurr = {
    persona: getS('persona'),
    fechaIni: fmtFecha(getS('fechaInicio')),
    fechaFin: fmtFecha(getS('fechaFin')),
    cargas: getN('cargas'),
    retiros: getN('retiros'),
    rangoNombre: getS('rangoNombre'),
    rangoComision: getN('rangoComision'),
    pagoSinDescuento: getN('pagoSinDescuento'),
    prorrateoNegativo: getN('prorrateoNegativo'),
    descuento: getN('descuento'),
    subTotal: getN('subTotal')
  };
  dataCurr.balance = Number((dataCurr.cargas - dataCurr.retiros).toFixed(2));

  // Datos mes anterior
  const dataPrev = {
    persona: getS('persona') || '—',
    fechaIni: fmtFecha(getS('fechaInicioPrev')),
    fechaFin: fmtFecha(getS('fechaFinPrev')),
    cargas: getN('cargasPrev'),
    retiros: getN('retirosPrev'),
    rangoNombre: getS('rangoNombre'),
    rangoComision: getN('rangoComision'),
    pagoSinDescuento: getN('pagoSinDescuentoPrev'),
    prorrateoNegativo: getN('prorrateoNegativoPrev'),
    descuento: getN('descuentoPrev'),
    subTotal: getN('subTotalPrev')
  };
  dataPrev.balance = Number((dataPrev.cargas - dataPrev.retiros).toFixed(2));

  // UI refs
  const avatarTxt = document.getElementById('avatarTxt');
  const personaName = document.getElementById('personaName');
  const rangoFechas = document.getElementById('rangoFechas');
  const rangoTxt = document.getElementById('rangoTxt');

  const kpiCargas = document.getElementById('kpiCargas');
  const kpiRetiros = document.getElementById('kpiRetiros');
  const kpiBalance = document.getElementById('kpiBalance');
  const kpiBalanceBox = document.getElementById('kpiBalanceBox');
  const kpiComi = document.getElementById('kpiComi');

  const kpiProrr = document.getElementById('kpiProrr');
  const kpiProrrBox = document.getElementById('kpiProrrBox');
  const kpiDesc = document.getElementById('kpiDesc');
  const kpiDescBox = document.getElementById('kpiDescBox');
  const kpiNeto = document.getElementById('kpiNeto');
  const kpiNetoBox = document.getElementById('kpiNetoBox');

  const tabCurr = document.getElementById('tab-curr');
  const tabPrev = document.getElementById('tab-prev');

  const setTabState = (which)=>{
    tabCurr.classList.toggle('active', which==='curr');
    tabPrev.classList.toggle('active', which==='prev');
    tabCurr.setAttribute('aria-selected', which==='curr' ? 'true':'false');
    tabPrev.setAttribute('aria-selected', which==='prev' ? 'true':'false');
  };

  function resetUI(){
    kpiBalanceBox.classList.remove('pos','neg');
    kpiProrrBox.classList.remove('pos','neg','warn');
    kpiDescBox.classList.remove('pos','neg','warn');
    kpiNetoBox.classList.remove('pos','neg');

    kpiCargas.textContent = '—';
    kpiRetiros.textContent = '—';
    kpiBalance.textContent = '—';
    kpiComi.textContent = '—';
    kpiProrr.textContent = '—';
    kpiDesc.textContent = '—';
    kpiNeto.textContent = '—';
  }

  const render = (data)=>{
    resetUI();

    // Header
    const iniciales = data.persona && data.persona!=='—'
      ? data.persona.split(/\s+/).slice(0,2).map(s=>s[0]?.toUpperCase()||'').join('')
      : 'CL';
    avatarTxt.textContent = iniciales;
    personaName.textContent = data.persona || '—';
    rangoFechas.textContent = `${data.fechaIni || '—'} – ${data.fechaFin || '—'}`;
    rangoTxt.textContent = `Rango: ${data.rangoNombre || '—'} (${fmt.format(data.rangoComision||0)}%)`;

    // KPIs (solo del periodo seleccionado; sin comparación)
    kpiCargas.textContent = `Bs ${fmt.format(data.cargas||0)}`;
    kpiRetiros.textContent = `Bs ${fmt.format(data.retiros||0)}`;

    kpiBalance.textContent = `Bs ${fmt.format(data.balance||0)}`;
    kpiBalanceBox.classList.add((data.balance||0) >= 0 ? 'pos' : 'neg');

    kpiComi.textContent = `${fmt.format(data.rangoComision||0)}%`;

    // Prorrateo negativo (normalmente negativo)
    kpiProrr.textContent = `Bs ${fmt.format(data.prorrateoNegativo||0)}`;
    if ((data.prorrateoNegativo||0) < 0) kpiProrrBox.classList.add('neg');
    else kpiProrrBox.classList.add('warn');

    // Descuento (se muestra como negativo fijo)
    const descVal = -Math.abs(data.descuento||0);
    kpiDesc.textContent = `Bs ${fmt.format(descVal)}`;
    kpiDescBox.classList.add('warn');

    // Pago neto (subtotal)
    kpiNeto.textContent = `Bs ${fmt.format(data.subTotal||0)}`;
    kpiNetoBox.classList.add((data.subTotal||0) >= 0 ? 'pos' : 'neg');
  };

  // Vista inicial (?view=prev)
  const initialView = (getS('view','curr').toLowerCase()==='prev') ? 'prev' : 'curr';
  setTabState(initialView);
  render(initialView==='curr' ? dataCurr : dataPrev);

  // Tabs
  tabCurr.addEventListener('click', ()=>{
    setTabState('curr');
    render(dataCurr);
    history.replaceState(null,'',updateQuery('view','curr'));
  });

  tabPrev.addEventListener('click', ()=>{
    setTabState('prev');
    render(dataPrev);
    history.replaceState(null,'',updateQuery('view','prev'));
  });

  function updateQuery(key, val){
    const url = new URL(location.href);
    url.searchParams.set(key, val);
    return url.toString();
  }
})();
</script>
</body>
</html>


Ningún archivo seleccionadoNingún archivo seleccionado
ChatGPT puede cometer errores. Comprueba la información importante.
